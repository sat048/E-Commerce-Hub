import React,{useState,useContext} from 'react'
import "./App.css"
// import {useDebounce} from "hook-debounce"
import useDebounce from 'hook-debounce/src/utils'
import {NavLink} from "react-router-dom"
import Routerview from "./router/routerview.js"
import Context from "./utils/context.js"
// import axios from "axios"
export default function App(props) {
  let [iptValue,setIptvalue] = useState('');
  let [searchlist,setSearchlist] = useState([])
  let [footlist] = useState([{path:"/app/index",name:"首页"},{path:"/app/my",name:"我的"},{path:"/app/carlist",name:"购物车"}])

  // const Change= async (value)=>{
  //   setIptvalue(value)
  //   let res1 = await axios.get("/api/search",{params:{value:value}});
  //   setSearchlist(res1.data.data)
  // }



  const Change = useDebounce(()=>{
    console.log('text');
  },1000,setIptvalue)
  


  return (
   <Context.Provider value={{searchlist}}>
      <div className="app">
      <div className="head">
        <input type="text" value={iptValue} onChange={(e)=>Change(e)} />
      </div>
      <div className="main">
      <Routerview routes={props.routes}  />
      </div>
      <div className="foot">
        {
          footlist.length && footlist.map((item,index)=>{
            return <span key={index}> <NavLink to={item.path} > {item.name} </NavLink> </span>
          })
        }
      </div>
    </div>
   </Context.Provider>
  )
}
